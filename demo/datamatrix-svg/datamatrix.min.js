/** https://github.com/datalog/datamatrix-svg under MIT license */
'use strict';function DATAMatrix(r){var e=[],t=0,n=0,f=function(r,t){e[t]=e[t]||[],e[t][r]=1},o=function(r){for(var e=[],t=r.length,n=0;n<t;n++){var f=r.charCodeAt(n),o=n+1<t?r.charCodeAt(n+1):0;f>47&&f<58&&o>47&&o<58?(e.push(10*(f-48)+o+82),n++):f>127?(e.push(235),e.push(f-127&255)):e.push(f+1)}return e},h=function(r,e){var t,n,f=0,h=0,i=r.length,a=[e[0]],u=function(r){h=40*h+r,2==f++&&(a.push(++h>>8),a.push(255&h),f=h=0)};for(t=0;t<i&&(0!=f||t!=i-1);t++){var s=r.charCodeAt(t);for(s>127&&238!=a[0]&&(u(1),u(30),s-=128),n=1;s>e[n];n+=3);var l=e[n+1];if(8==l||9==l&&0==f&&t==i-1)return[];if(l<5&&2==f&&t==i-1)break;l<5&&u(l),u(s-e[n+2])}return 2==f&&238!==a[0]&&u(0),a.push(254),(f>0||t<i)&&(a=a.concat(o(r.substr(t-f)))),a},i=function(r,e){r=unescape(encodeURI(r));var i=o(r),a=i.length,u=h(r,[230,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,9,51,95,1,69,127,2,96,255,1,0]),s=u.length;s>0&&s<a&&(i=u,a=s),(s=(u=h(r,[239,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,2,64,95,1,69,122,9,83,127,2,96,255,1,0])).length)>0&&s<a&&(i=u,a=s),(s=(u=h(r,[238,12,8,0,13,9,13,31,8,0,32,9,29,41,8,0,42,9,41,47,8,0,57,9,44,64,8,0,90,9,51,255,8,0])).length)>0&&s<a&&(i=u,a=s),(s=(u=function(r){for(var e,t=r.length,n=t+1&-4,f=0,h=n>0?[240]:[],i=0;i<n;i++){if(i<n-1){if((e=r.charCodeAt(i))<32||e>94)return[]}else e=31;f=64*f+(63&e),3==(3&i)&&(h.push(f>>16),h.push(f>>8&255),h.push(255&f),f=0)}return n>t?h:h.concat(o(r.substr(0==n?0:n-1)))}(r)).length)>0&&s<a&&(i=u,a=s),(s=(u=function(r){var e=[231],t=r.length;250<t&&e.push(37+(t/250|0)&255),e.push(t%250+149*(e.length+1)%255+1&255);for(var n=0;n<t;n++)e.push(r.charCodeAt(n)+149*(e.length+1)%255+1&255);return e}(r)).length)>0&&s<a&&(i=u,a=s);var l,c,p,v,g,d,w,A,m=1,C=1,b=-1,M=1;if(e&&a<50){u=[16,7,28,11,24,14,32,18,32,24,44,28];do{s=(c=u[++b])*(l=6+(12&b))/8}while(s-u[++b]<a);c>25&&(m=2)}else{c=l=6,g=2,u=[5,7,10,12,14,18,20,24,28,36,42,48,56,68,84,112,144,192,224,272,336,408,496,620];do{if(++b==u.length)return[0,0];c>11*g&&(g=4+g&12),s=(c=l+=g)*l>>3}while(s-u[b]<a);c>27&&(C=m=2*Math.floor(c/54)+2),s>255&&(M=2*(s>>9)+2)}for(p=c/m,v=l/C,a<s-(A=u[b])&&(i[a++]=129);a<s-A;)i[a++]=(149*a%253+130)%254;A/=M;var y=new Array(70),x=new Array(70),z=new Array(256),E=new Array(255);for(b=1,g=0;g<255;g++)E[g]=b,z[b]=g,(b+=b)>255&&(b^=301);for(y[A]=0,g=1;g<=A;g++)for(y[b=A-g]=1;b<A;b++)y[b]=y[b+1]^E[(z[y[b]]+g)%255];for(d=0;d<M;d++){for(g=0;g<=A;g++)x[g]=0;for(g=d;g<a;g+=M)for(b=0,j=x[0]^i[g];b<A;b++)x[b]=x[b+1]^(j?E[(z[y[b]]+z[j])%255]:0);for(g=0;g<A;g++)i[a+d+g*M]=x[g]}for(g=0;g<l+2*C;g+=v+2)for(b=0;b<c+2*m;b++)f(b,g+v+1),0==(1&b)&&f(b,g);for(g=0;g<c+2*m;g+=p+2)for(b=0;b<l;b++)f(g,b+2*(b/v|0)+1),1==(1&b)&&f(g+p+1,b+2*(b/v|0));for(A=2,d=0,w=4,M=[0,0,-1,0,-2,0,0,-1,-1,-1,-2,-1,-1,-2,-2,-2],g=0;g<s;w-=A,d+=A){if(w==l-3&&-1==d)u=[c,6-l,c,5-l,c,4-l,c,3-l,c-1,3-l,3,2,2,2,1,2];else if(w==l+1&&1==d&&0==(7&c)&&6==(7&l))u=[c-2,-l,c-3,-l,c-4,-l,c-2,-1-l,c-3,-1-l,c-4,-1-l,c-2,-2,-1,-2];else{if(0==w&&d==c-2&&3&c)continue;if(w<0||d>=c||w>=l||d<0)for(w+=2+(A=-A)/2,d+=2-A/2;w<0||d>=c||w>=l||d<0;)w-=A,d+=A;if(w==l-2&&0==d&&3&c)u=[c-1,3-l,c-1,2-l,c-2,2-l,c-3,2-l,c-4,2-l,0,1,0,0,0,-1];else if(w==l-2&&0==d&&4==(7&c))u=[c-1,5-l,c-1,4-l,c-1,3-l,c-1,2-l,c-2,2-l,0,1,0,0,0,-1];else{if(1==w&&d==c-1&&0==(7&c)&&6==(7&l))continue;u=M}}for(a=i[g++],b=0;a>0;b+=2,a>>=1)if(1&a){var j=d+u[b],k=w+u[b+1];j<0&&(j+=c,k+=4-(c+4&7)),k<0&&(k+=l,j+=4-(l+4&7)),f(j+2*(j/p|0)+1,k+2*(k/v|0)+1)}}for(g=c;3&g;g--)f(g,g);t=c+2*m,n=l+2*C};return function(){function f(r){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(r)}function o(r,e){for(var t in r=document.createElementNS(g,r),e||{})r.setAttribute(t,e[t]);return r}var h,a,u,s,l,c,p,v=Math.abs,g="http://www.w3.org/2000/svg",d="",w="string"==typeof r?{msg:r}:r||{},A=w.pal||["#000"],m=v(w.dim)||256,C=[1,0,0,1,p=(p=v(w.pad))>-1?p:0,p],b=f(b=A[0])?b:"#000",M=f(M=A[1])?M:0,y=w.vrb?0:1;for(i(w.msg||"",w.rct),l=t+2*p,c=n+2*p,u=n;u--;)for(s=0,a=t;a--;)e[u][a]&&(y?(s++,e[u][a-1]||(d+="M"+a+","+u+"h"+s+"v1h-"+s+"v-1z",s=0)):d+="M"+a+","+u+"h1v1h-1v-1z");return h=o("svg",{viewBox:[0,0,l,c].join(" "),width:m/c*l|0,height:m,fill:b,"shape-rendering":"crispEdges",xmlns:g,version:"1.1"}),M&&h.appendChild(o("path",{fill:M,d:"M0,0v"+c+"h"+l+"V0H0Z"})),h.appendChild(o("path",{transform:"matrix("+C+")",d:d})),h}()}