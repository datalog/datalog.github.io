/** https://github.com/datalog/datamatrix-svg under MIT license */
'use strict';function DATAMatrix(r){var t=[],e=0,n=0,f=function(r,e){t[e]=t[e]||[],t[e][r]=1},o=function(r){for(var t=[],e=r.length,n=0;n<e;n++){var f=r.charCodeAt(n),o=n+1<e?r.charCodeAt(n+1):0;f>47&&f<58&&o>47&&o<58?(t.push(10*(f-48)+o+82),n++):f>127?(t.push(235),t.push(f-127&255)):t.push(f+1)}return t},h=function(r,t){var e,n,f=0,h=0,i=r.length,a=[t[0]],u=function(r){h=40*h+r,2==f++&&(a.push(++h>>8),a.push(255&h),f=h=0)};for(e=0;e<i&&(0!=f||e!=i-1);e++){var s=r.charCodeAt(e);for(s>127&&238!=a[0]&&(u(1),u(30),s-=128),n=1;s>t[n];n+=3);var l=t[n+1];if(8==l||9==l&&0==f&&e==i-1)return[];if(l<5&&2==f&&e==i-1)break;l<5&&u(l),u(s-t[n+2])}return 2==f&&238!==a[0]&&u(0),a.push(254),(f>0||e<i)&&(a=a.concat(o(r.substr(e-f)))),a},i=function(r,t){var i=o(r),a=i.length,u=h(r,[230,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,9,51,95,1,69,127,2,96,255,1,0]),s=u.length;s>0&&s<a&&(i=u,a=s),(s=(u=h(r,[239,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,2,64,95,1,69,122,9,83,127,2,96,255,1,0])).length)>0&&s<a&&(i=u,a=s),(s=(u=h(r,[238,12,8,0,13,9,13,31,8,0,32,9,29,41,8,0,42,9,41,47,8,0,57,9,44,64,8,0,90,9,51,255,8,0])).length)>0&&s<a&&(i=u,a=s),(s=(u=function(r){for(var t,e=r.length,n=e+1&-4,f=0,h=n>0?[240]:[],i=0;i<n;i++){if(i<n-1){if((t=r.charCodeAt(i))<32||t>94)return[]}else t=31;f=64*f+(63&t),3==(3&i)&&(h.push(f>>16),h.push(f>>8&255),h.push(255&f),f=0)}return n>e?h:h.concat(o(r.substr(0==n?0:n-1)))}(r)).length)>0&&s<a&&(i=u,a=s),(s=(u=function(r){var t=[231],e=r.length;250<e&&t.push(37+(e/250|0)&255),t.push(e%250+149*(t.length+1)%255+1&255);for(var n=0;n<e;n++)t.push(r.charCodeAt(n)+149*(t.length+1)%255+1&255);return t}(r)).length)>0&&s<a&&(i=u,a=s);var l,c,p,v,g,d,w,A,m=1,C=1,b=-1,M=1;if(t&&a<50){u=[16,7,28,11,24,14,32,18,32,24,44,28];do{s=(c=u[++b])*(l=6+(12&b))/8}while(s-u[++b]<a);c>25&&(m=2)}else{c=l=6,g=2,u=[5,7,10,12,14,18,20,24,28,36,42,48,56,68,84,112,144,192,224,272,336,408,496,620];do{if(++b==u.length)return[0,0];c>11*g&&(g=4+g&12),s=(c=l+=g)*l>>3}while(s-u[b]<a);c>27&&(C=m=2*Math.floor(c/54)+2),s>255&&(M=2*(s>>9)+2)}for(p=c/m,v=l/C,a<s-(A=u[b])&&(i[a++]=129);a<s-A;)i[a++]=(149*a%253+130)%254;A/=M;var y=new Array(70),x=new Array(70),z=new Array(256),E=new Array(255);for(b=1,g=0;g<255;g++)E[g]=b,z[b]=g,(b+=b)>255&&(b^=301);for(y[A]=0,g=1;g<=A;g++)for(y[b=A-g]=1;b<A;b++)y[b]=y[b+1]^E[(z[y[b]]+g)%255];for(d=0;d<M;d++){for(g=0;g<=A;g++)x[g]=0;for(g=d;g<a;g+=M)for(b=0,H=x[0]^i[g];b<A;b++)x[b]=x[b+1]^(H?E[(z[y[b]]+z[H])%255]:0);for(g=0;g<A;g++)i[a+d+g*M]=x[g]}for(g=0;g<l+2*C;g+=v+2)for(b=0;b<c+2*m;b++)f(b,g+v+1),0==(1&b)&&f(b,g);for(g=0;g<c+2*m;g+=p+2)for(b=0;b<l;b++)f(g,b+2*(b/v|0)+1),1==(1&b)&&f(g+p+1,b+2*(b/v|0));for(A=2,d=0,w=4,M=[0,0,-1,0,-2,0,0,-1,-1,-1,-2,-1,-1,-2,-2,-2],g=0;g<s;w-=A,d+=A){if(w==l-3&&-1==d)u=[c,6-l,c,5-l,c,4-l,c,3-l,c-1,3-l,3,2,2,2,1,2];else if(w==l+1&&1==d&&0==(7&c)&&6==(7&l))u=[c-2,-l,c-3,-l,c-4,-l,c-2,-1-l,c-3,-1-l,c-4,-1-l,c-2,-2,-1,-2];else{if(0==w&&d==c-2&&3&c)continue;if(w<0||d>=c||w>=l||d<0)for(w+=2+(A=-A)/2,d+=2-A/2;w<0||d>=c||w>=l||d<0;)w-=A,d+=A;if(w==l-2&&0==d&&3&c)u=[c-1,3-l,c-1,2-l,c-2,2-l,c-3,2-l,c-4,2-l,0,1,0,0,0,-1];else if(w==l-2&&0==d&&4==(7&c))u=[c-1,5-l,c-1,4-l,c-1,3-l,c-1,2-l,c-2,2-l,0,1,0,0,0,-1];else{if(1==w&&d==c-1&&0==(7&c)&&6==(7&l))continue;u=M}}for(a=i[g++],b=0;a>0;b+=2,a>>=1)if(1&a){var H=d+u[b],V=w+u[b+1];H<0&&(H+=c,V+=4-(c+4&7)),V<0&&(V+=l,H+=4-(l+4&7)),f(H+2*(H/p|0)+1,V+2*(V/v|0)+1)}}for(g=c;3&g;g--)f(g,g);e=c+2*m,n=l+2*C},a=Math.abs;return function(){function f(r){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(r)}function o(r,t){for(var e in r=document.createElementNS(p,r),t||{})r.setAttribute(e,t[e]);return r}var h,u,s,l,c,p="http://www.w3.org/2000/svg",v="",g="string"==typeof r?{msg:r}:r||{},d=g.pal||["#000"],w=a(g.dim)||256,A=[1,0,0,1,c=(c=a(g.pad))>-1?c:4,c],m=f(m=d[0])?m:"#000",C=f(C=d[1])?C:0,b=g.vrb?0:1;i(g.msg||"",0);var M=e+2*c,y=n+2*c;for(s=n;s--;)for(l=0,u=e;u--;)t[s][u]&&(b?(l++,t[s][u-1]||(v+="M"+u+","+s+"h"+l+"v1h-"+l+"v-1z",l=0)):v+="M"+u+","+s+"h1v1h-1v-1z");return h=o("svg",{viewBox:[0,0,M,y].join(" "),width:w,height:w,fill:m,"shape-rendering":"crispEdges",xmlns:p,version:"1.1"}),C&&h.appendChild(o("path",{fill:C,d:"M0,0V"+M+"H"+y+"V0H0Z"})),h.appendChild(o("path",{transform:"matrix("+A+")",d:v})),h}()}